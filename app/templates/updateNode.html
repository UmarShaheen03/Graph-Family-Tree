<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Update Node</title>
    <meta charset="UTF-8">

</head>
<body>
    <div class="container">
        <div id="AppendTree">
            <h1>Edit the Family Tree</h1>
        </div>
        <br>
        <h2 class="SubHead">Please Enter The Following</h2>
        <form class="Form" method="post">
            {{ Updateform.hidden_tag() }}

            
    <h2> Update Form</h2>
    {% with messages = get_flashed_messages() %}
    {% if messages %}
       <ul>
         {% for messages in messages%}
            <li>{{messages}}</li>
 
         {% endfor %}
       </ul>
 {% endif %}
 {% endwith %}
    <form class="Form" method="post">
        <div class="form-group">
            {{ Updateform.Nodes.label }}<br>
            <select id="{{ Updateform.Nodes.name }}" name="{{ Updateform.Nodes.name }}">
                {% for value, label in Updateform.Nodes.choices %}
                    <option value="{{ value }}">{{ label }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="form-group">
            {{ Updateform.FullName.label }}
            {{ Updateform.FullName(id="FullName") }}
        </div>
        <div class="form-group">
            {{ Updateform.DateOfBirth.label }}
            {{ Updateform.DateOfBirth( id="date_birth") }}
        </div>
            
            <script>
                // Getting todays date in the form YYYY-MM-DD
                const DATE = new Date().toISOString();   //RETURNING DATE OBJECT AS A STRING 
                const YearMonthDay= DATE.split('T')[0]   // CUTTING THE DATA OFF AT THE TIME AS WE ONLY NEED YYYY-MM-DD
                // Making the Max attribute todays date 
                document.getElementById('date_birth').setAttribute('max', YearMonthDay);
            </script>
        <div class="form-group">
            {{ Updateform.About.label(class="control-label") }}
            {{ Updateform.About(class="form-control", id="About") }}
        </div>
        <div class="form-group">
            {{ Updateform.Location.label }}
            {{ Updateform.Location(id="Location") }}
        </div>
        <div class="form-group">
            {{ Updateform.Email.label }}
            {{ Updateform.Email(id="Email") }}
        </div>
        <div class="form-group">
            {{ Updateform.PhoneNumber.label }}
            {{ Updateform.PhoneNumber(id="PhoneNumber") }}
        </div>
        <div class="form-group">
            {{ Updateform.Address.label }}
            {{ Updateform.Address(id="Address") }}
        </div>
        <h3>Update Relationships</h3>
{% for relationship in Updateform.relationships %}
    <div class="relationship-entry">
        {{ relationship.node.label }} {{ relationship.node() }}
        {{ relationship.relationship_type.label }} {{ relationship.relationship_type() }}
    </div>
{% endfor %}
<div class="form-group">
    {{ Updateform.submit(class="btn btn-danger") }}
</div>
        </form>
        <button class="btn btn-primary" onclick="location.href='/'">Back To Family Tree</button>
    </div>
</body>
</html>